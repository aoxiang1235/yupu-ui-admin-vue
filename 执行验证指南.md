# 交易配置表扩展验证指南

## 一、执行验证前的准备

### 1.1 确认数据库信息

根据后端配置文件，数据库信息如下：
- **数据库名**：`ruoyi-vue-pro`
- **用户名**：`root`
- **密码**：`123456`
- **地址**：`127.0.0.1:3306`

**如果您的数据库信息不同，请修改验证脚本中的数据库名。**

### 1.2 确认已执行 ALTER 语句

确保已经执行了 `交易配置表扩展ALTER语句.sql` 脚本。

## 二、执行验证

### 方式1：命令行执行（推荐）

```bash
# 进入项目目录
cd /Users/yaoyushao/Documents/轻商场/yupu-ui-admin-vue

# 执行验证脚本
mysql -uroot -p123456 ruoyi-vue-pro < 交易配置表扩展-执行验证.sql
```

**如果数据库密码不同，请修改命令：**
```bash
mysql -u用户名 -p密码 数据库名 < 交易配置表扩展-执行验证.sql
```

### 方式2：MySQL客户端执行

1. 打开MySQL客户端（如：MySQL Workbench、Navicat、命令行等）
2. 连接到数据库
3. 选择数据库：`USE ruoyi-vue-pro;`
4. 打开文件 `交易配置表扩展-执行验证.sql`
5. 执行整个脚本

### 方式3：分步执行（便于查看结果）

可以逐个执行验证脚本中的SQL语句，查看每一步的结果。

## 三、验证结果说明

### 3.1 正常结果

- ✅ **字段总数**：约70个字段
- ✅ **同城配送字段数**：30个
- ✅ **门店自配送字段数**：20个
- ✅ **配置记录数**：1条（id=1）

### 3.2 异常情况处理

#### 问题1：字段数量不对
- **原因**：ALTER语句未完全执行
- **解决**：重新执行 `交易配置表扩展ALTER语句.sql`

#### 问题2：字段不存在
- **原因**：ALTER语句执行失败
- **解决**：检查错误信息，修复后重新执行

#### 问题3：配置记录不存在
- **原因**：表中没有数据
- **解决**：执行以下SQL插入默认记录：
```sql
INSERT INTO trade_config (id) VALUES (1) 
ON DUPLICATE KEY UPDATE id = id;
```

## 四、快速验证命令

如果只想快速检查关键字段，可以执行：

```sql
-- 快速检查
USE ruoyi-vue-pro;

-- 检查字段总数
SELECT COUNT(*) as total_fields FROM information_schema.COLUMNS 
WHERE TABLE_SCHEMA = 'ruoyi-vue-pro' AND TABLE_NAME = 'trade_config';

-- 检查同城配送字段
SELECT COUNT(*) as same_city_fields FROM information_schema.COLUMNS 
WHERE TABLE_SCHEMA = 'ruoyi-vue-pro' AND TABLE_NAME = 'trade_config' 
AND COLUMN_NAME LIKE 'same_city%';

-- 检查门店自配送字段
SELECT COUNT(*) as store_fields FROM information_schema.COLUMNS 
WHERE TABLE_SCHEMA = 'ruoyi-vue-pro' AND TABLE_NAME = 'trade_config' 
AND COLUMN_NAME LIKE 'store%';

-- 检查关键字段
SHOW COLUMNS FROM trade_config WHERE Field IN (
    'delivery_express_enabled',
    'delivery_same_city_enabled',
    'delivery_store_enabled'
);
```

## 五、验证通过后的下一步

1. ✅ 验证数据库表结构
2. ⏳ 编译后端代码（确保无编译错误）
3. ⏳ 启动后端服务
4. ⏳ 启动前端服务
5. ⏳ 测试配置页面功能

---

**提示**：如果数据库名、用户名或密码不同，请修改验证脚本中的相应信息。

