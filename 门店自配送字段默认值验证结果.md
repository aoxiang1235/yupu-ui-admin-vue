# 门店自配送字段默认值验证结果

## 一、已验证字段（10个）

### ✅ 已验证字段清单

| 字段名                           | 默认值  | 状态        | 说明                              |
| -------------------------------- | ------- | ----------- | --------------------------------- |
| `store_custom_price_enabled`     | `b'0'`  | ✅ 有默认值 | 布尔类型，默认关闭                |
| `store_extra_distance`           | `1.00`  | ✅ 有默认值 | 续距，默认1公里                   |
| `store_extra_price`              | `0`     | ✅ 有默认值 | 续费，默认0分                     |
| `store_fixed_price`              | `0`     | ✅ 有默认值 | 固定配送费，默认0分               |
| `store_free_enabled`             | `b'0'`  | ✅ 有默认值 | 包邮开关，默认关闭                |
| `store_free_price`               | `0`     | ✅ 有默认值 | 满额包邮金额，默认0分             |
| `store_max_distance`             | `20.00` | ✅ 有默认值 | 最大配送距离，默认20公里          |
| `store_start_distance`           | `3.00`  | ✅ 有默认值 | 起步距离，默认3公里               |
| `store_start_price`              | `0`     | ✅ 有默认值 | 起步价，默认0分                   |
| `store_delivery_range_image_url` | `NULL`  | ✅ 正常     | URL字段，允许为空（需要上传图片） |

### 说明

`store_delivery_range_image_url` 字段：

- **设计为允许 NULL**（`varchar(500) NULL`）
- **无默认值是正常的**，因为这是可选的图片URL字段
- 用户上传图片后才会填充此字段
- ⚠️ 标记只是提醒，实际设计是正确的

## 二、待验证字段（5个）

以下字段的默认值需要确认：

1. `store_charge_mode` - 计费方式（预期默认值：`1`）
2. `store_custom_min_price` - 最低配送费（预期默认值：`0`）
3. `store_custom_max_price` - 最高配送费（预期默认值：`0`）
4. `store_custom_need_audit` - 是否需要审核（预期默认值：`b'0'`）
5. `store_custom_default_price` - 默认配送费（预期默认值：`0`）

## 三、完整验证SQL

```sql
-- 查询所有门店自配送字段的默认值
SELECT
    COLUMN_NAME as 字段名,
    COLUMN_DEFAULT as 默认值,
    IS_NULLABLE as 允许空,
    COLUMN_TYPE as 字段类型,
    CASE
        WHEN COLUMN_DEFAULT IS NOT NULL THEN '✅ 有默认值'
        WHEN IS_NULLABLE = 'YES' THEN '✅ 允许NULL（正常）'
        ELSE '⚠️ 无默认值且不允许NULL'
    END as 状态,
    COLUMN_COMMENT as 字段注释
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE()
AND TABLE_NAME = 'trade_config'
AND COLUMN_NAME LIKE 'store%'
ORDER BY ORDINAL_POSITION;
```

## 四、验证结论

### ✅ 已验证字段状态

- **10个字段已验证**：9个有默认值，1个允许NULL（正常）
- **字段设计正确**：所有默认值符合业务逻辑

### 待补充验证

- **5个字段待验证**：包括计费方式、自定义费用相关字段

### 最终评估

**✅ 门店自配送字段默认值配置正常**

所有已验证字段的默认值都符合设计要求：

- 布尔字段默认 `b'0'`（关闭状态）
- 金额字段默认 `0`（单位：分）
- 距离字段有合理的默认值（起步3公里，最大20公里，续距1公里）
- URL字段允许NULL（需要用户上传后才有值）

---

**建议**：执行上面的SQL查询剩余5个字段的默认值，确认完整配置。
